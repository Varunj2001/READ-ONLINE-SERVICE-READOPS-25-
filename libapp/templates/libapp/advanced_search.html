{% extends 'libapp/base.html' %}
{% block title %}Advanced Search - ReadOps{% endblock %}
{% block content %}
{% load static %}

<style>
    .search-container {
        max-width: 1000px;
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .search-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 3rem 2rem;
        text-align: center;
        border-radius: 20px;
        margin-bottom: 2rem;
    }

    .search-form {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef;
        margin-bottom: 2rem;
    }

    .search-form h3 {
        color: #2c3e50;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .search-input {
        width: 100%;
        padding: 1rem;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        font-size: 1.1rem;
        transition: all 0.3s ease;
    }

    .search-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-button {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 1rem;
    }

    .search-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .search-results {
        display: grid;
        gap: 1.5rem;
    }

    .book-card {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef;
        transition: all 0.3s ease;
    }

    .book-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }

    .book-card h4 {
        color: #2c3e50;
        margin-bottom: 0.5rem;
        font-size: 1.3rem;
    }

    .book-card p {
        color: #666;
        margin-bottom: 0.5rem;
    }

    .book-actions {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
    }

    .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 6px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        color: white;
        text-decoration: none;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background: #5a6268;
        color: white;
        text-decoration: none;
    }

    .empty-state {
        text-align: center;
        padding: 3rem 2rem;
        color: #666;
    }

    .empty-state i {
        font-size: 3rem;
        color: #ddd;
        margin-bottom: 1rem;
    }

    .search-tips {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
        margin-top: 2rem;
    }

    .search-tips h4 {
        color: #2c3e50;
        margin-bottom: 1rem;
    }

    .search-tips ul {
        margin: 0;
        padding-left: 1.5rem;
    }

    .search-tips li {
        margin-bottom: 0.5rem;
        color: #666;
    }
</style>

<div class="search-container">
    <div class="search-header">
        <h1><i class="fas fa-search"></i> Advanced Search</h1>
        <p>Find books with intelligent fuzzy matching and smart suggestions</p>
    </div>

    <div class="search-form">
        <h3><i class="fas fa-magic"></i> Smart Search</h3>
        <form method="GET" action="{% url 'advanced_search' %}">
            <input 
                type="text" 
                name="q" 
                value="{{ query }}" 
                placeholder="Search by title, author, subject, or any keywords..." 
                class="search-input"
            >
            <button type="submit" class="search-button">
                <i class="fas fa-search"></i> Search
            </button>
        </form>
    </div>

    {% if query %}
        {% if search_results %}
            <div class="search-results">
                <h3 style="color: #2c3e50; margin-bottom: 1.5rem;">
                    <i class="fas fa-list"></i> Search Results for "{{ query }}"
                </h3>
                
                {% for book in search_results %}
                <div class="book-card">
                    <h4>{{ book.title }}</h4>
                    <p><strong>Author:</strong> {{ book.author }}</p>
                    <p><strong>Subject:</strong> {{ book.subject }}</p>
                    <p><strong>Department:</strong> {{ book.department }}</p>
                    <p><strong>Available:</strong> {{ book.quantity }} copies</p>
                    
                    <div class="book-actions">
                        <a href="{% url 'explore' %}?q={{ book.title }}" class="btn btn-primary">
                            <i class="fas fa-eye"></i> View Details
                        </a>
                        {% if book.quantity > 0 %}
                        <a href="{% url 'add_to_cart' book.id %}" class="btn btn-secondary">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </a>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <i class="fas fa-search"></i>
                <h3>No Results Found</h3>
                <p>Try different keywords or check your spelling.</p>
            </div>
        {% endif %}
    {% else %}
        <div class="search-tips">
            <h4><i class="fas fa-lightbulb"></i> Search Tips</h4>
            <ul>
                <li><strong>Partial Matching:</strong> You don't need to type the exact title or author name</li>
                <li><strong>Multiple Keywords:</strong> Use several words to narrow down your search</li>
                <li><strong>Subject Search:</strong> Search by subject area like "Computer Science" or "Mathematics"</li>
                <li><strong>Author Search:</strong> Search by author name to find all their books</li>
                <li><strong>Title Search:</strong> Search by book title or part of the title</li>
            </ul>
        </div>
    {% endif %}
</div>

{% endblock %}
